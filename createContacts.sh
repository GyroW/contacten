#!/bin/bash
cat head.csv > out.csv
cat lijst.csv | sed "s/;[^;]*$//" | tr \; , | sed '1 s/^.*$/voornaam,achternaam,naam_eerste_contact,gsm_eerste_contact,email_eerste_contact,naam_tweede_contact,gsm_tweede_contact,email_tweede_contact,takken,geboortedatum,adres/g' | sed 's/[0-9]\+\///g' | q -H -d , "select '' as 'Name',voornaam as 'Given Name', '' as 'Additional Name', achternaam as 'Family Name', '' as 'Yomi Name', '' as 'Given Name Yomi', '' as 'Additional Name Yomi', '' as 'Family Name Yomi', '' as 'Name Prefix', '' as 'Name Suffix', '' as 'Initials', '' as 'Nickname', '' as 'Short Name', '' as 'Maiden Name', geboortedatum as 'Birthday', '' as 'Gender', '' as 'Location', '' as 'Billing Information', '' as 'Directory Server', '' as 'Mileage', '' as 'Occupation', '' as 'Hobby', '' as 'Sensitivity', '' as 'Priority', '' as 'Subject', '' as 'Notes', cast( 'Mijn contacten ::: ' as text) || cast( 'My contacts ::: ' as text) || cast ( geboortedatum as text) || cast(' ::: ' as text) || cast( takken as text) as 'Group Membership', naam_eerste_contact as 'E-mail 1 - Type', email_eerste_contact as 'E-mail 1 - Value', naam_tweede_contact as 'E-mail 2 - Type', email_tweede_contact as 'E-mail 2 - Value', naam_eerste_contact as 'Phone 1 - Type', cast( '0' as text) || cast ( gsm_eerste_contact as text) as 'Phone 1 - Value', naam_tweede_contact as 'Phone 2 - Type', cast( '0' as text) || cast ( gsm_tweede_contact as text) as 'Phone 2 - Value' from -" >> out.csv 
